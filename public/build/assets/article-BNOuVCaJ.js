var c=Object.defineProperty;var o=(t,e,i)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var s=(t,e,i)=>o(t,typeof e!="symbol"?e+"":e,i);import{K as n}from"./app-D2FrC-Qp.js";import{h as r,a as h}from"./index-B_SCSNjl.js";class d{constructor(){s(this,"apiUrl","/article")}create(e){return r.post(this.apiUrl,{title:e})}getList(){return r.get(this.apiUrl+"/")}addLike(e,i){return console.log("lekfef",e,i),r.post(this.apiUrl+"/add/"+e,{like:i})}getApiWithSlug(e){return r.get(this.apiUrl+"/"+e)}delete(e){return r.delete(this.apiUrl+"/"+e)}}const p=new d,S=n("article",{state:()=>({selectedArticle:null,articleSelected:!1,articles:[],articleFetchError:null,loading:!1}),actions:{clear(){this.selectedArticle=null,this.articleSelected=!1,this.loading=!1},setSelectedArticle(t){console.log(t.id),this.selectedArticle=t,t?this.articleSelected=!0:this.articleSelected=!1},fetch(){this.loading=!0,p.getList().then(t=>{console.log("LIBRS_OK",t.data.articles),this.articles=t.data.articles}).catch(t=>{console.log("LIBRS_ERR"),this.articleFetchError=t}).finally(()=>{this.loading=!1})},fetchLocalData(){h.get("data-sources/pieces.json",{baseURL:window.location.origin}).then(t=>{console.log(t.data),this.pieces=t.data})},async create(t){this.loading=!0;try{const e=await pieceService.create(t);return e.data.piece&&this.pieces.push(e.data.piece),e.data}catch(e){return this.pieceFetchError=e,e}finally{this.loading=!1}},async edit(t,e){this.loading=!0;try{const i=await pieceService.edit(t,e),a=this.pieces.findIndex(l=>l.id===t);return this.pieces[a]=i.data,!0}catch(i){return this.pieceFetchError=i,i}finally{this.loading=!1}},async delete(t){this.loading=!0;try{return await pieceService.delete(t),console.log("pieces::",this.pieces,t),this.pieces=this.pieces.filter(e=>e.id!==t),!0}catch(e){return this.pieceFetchError=e,e}finally{this.loading=!1}}}});export{p as a,S as u};
