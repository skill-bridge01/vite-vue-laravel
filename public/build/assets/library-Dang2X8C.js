var c=Object.defineProperty;var n=(t,e,r)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var a=(t,e,r)=>n(t,typeof e!="symbol"?e+"":e,r);import{j as h}from"./app-DdxwakMc.js";import{h as i,a as o}from"./index-B_SCSNjl.js";class d{constructor(){a(this,"apiUrl","/library")}create(e){return i.post(this.apiUrl,{title:e})}getList(){return i.get(this.apiUrl+"/")}getApiWithSlug(e){return i.get(this.apiUrl+"/"+e)}delete(e){return i.delete(this.apiUrl+"/"+e)}}const y=new d,g=h("library",{state:()=>({selectedLibrary:null,librarySelected:!1,librarys:[],libraryFetchError:null,loading:!1}),actions:{clear(){this.selectedLibrary=null,this.librarySelected=!1,this.loading=!1},setSelectedLibrary(t){console.log(t.id),this.selectedLibrary=t,t?this.librarySelected=!0:this.librarySelected=!1},fetch(){this.loading=!0,y.getList().then(t=>{this.librarys=t.data.librarys}).catch(t=>{this.libraryFetchError=t}).finally(()=>{this.loading=!1})},fetchLocalData(){o.get("data-sources/pieces.json",{baseURL:window.location.origin}).then(t=>{console.log(t.data),this.pieces=t.data})},async create(t){this.loading=!0;try{const e=await pieceService.create(t);return e.data.piece&&this.pieces.push(e.data.piece),e.data}catch(e){return this.pieceFetchError=e,e}finally{this.loading=!1}},async edit(t,e){this.loading=!0;try{const r=await pieceService.edit(t,e),s=this.pieces.findIndex(l=>l.id===t);return this.pieces[s]=r.data,!0}catch(r){return this.pieceFetchError=r,r}finally{this.loading=!1}},async delete(t){this.loading=!0;try{return await pieceService.delete(t),console.log("pieces::",this.pieces,t),this.pieces=this.pieces.filter(e=>e.id!==t),!0}catch(e){return this.pieceFetchError=e,e}finally{this.loading=!1}}}});export{y as l,g as u};
