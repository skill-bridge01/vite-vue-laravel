var c=Object.defineProperty;var o=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var a=(e,t,r)=>o(e,typeof t!="symbol"?t+"":t,r);import{K as n}from"./app-D2FrC-Qp.js";import{h as i,a as h}from"./index-B_SCSNjl.js";class d{constructor(){a(this,"apiUrl","/library")}create(t){return i.post(this.apiUrl,{title:t})}getList(){return i.get(this.apiUrl+"/")}getApiWithSlug(t){return i.get(this.apiUrl+"/"+t)}delete(t){return i.delete(this.apiUrl+"/"+t)}}const y=new d,f=n("library",{state:()=>({selectedLibrary:null,librarySelected:!1,librarys:[],libraryFetchError:null,loading:!1}),actions:{clear(){this.selectedLibrary=null,this.librarySelected=!1,this.loading=!1},setSelectedLibrary(e){console.log(e.id),this.selectedLibrary=e,e?this.librarySelected=!0:this.librarySelected=!1},fetch(){console.log("lll"),this.loading=!0,y.getList().then(e=>{console.log("LIBRS_OK",e.data.librarys),this.librarys=e.data.librarys}).catch(e=>{console.log("LIBRS_ERR"),this.libraryFetchError=e}).finally(()=>{this.loading=!1})},fetchLocalData(){h.get("data-sources/pieces.json",{baseURL:window.location.origin}).then(e=>{console.log(e.data),this.pieces=e.data})},async create(e){this.loading=!0;try{const t=await pieceService.create(e);return t.data.piece&&this.pieces.push(t.data.piece),t.data}catch(t){return this.pieceFetchError=t,t}finally{this.loading=!1}},async edit(e,t){this.loading=!0;try{const r=await pieceService.edit(e,t),s=this.pieces.findIndex(l=>l.id===e);return this.pieces[s]=r.data,!0}catch(r){return this.pieceFetchError=r,r}finally{this.loading=!1}},async delete(e){this.loading=!0;try{return await pieceService.delete(e),console.log("pieces::",this.pieces,e),this.pieces=this.pieces.filter(t=>t.id!==e),!0}catch(t){return this.pieceFetchError=t,t}finally{this.loading=!1}}}});export{y as l,f as u};
